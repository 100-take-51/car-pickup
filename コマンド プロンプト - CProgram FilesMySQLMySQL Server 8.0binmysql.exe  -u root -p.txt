Microsoft Windows [Version 10.0.26200.7462]
(c) Microsoft Corporation. All rights reserved.

C:\Users\100ta>"C:\Program Files\MySQL\MySQL Server 8.0\bin\mysql.exe" -u root -p
Enter password: ********
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 8.0.44 MySQL Community Server - GPL

Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> CREATE DATABASE car_pickup_db
    ->   DEFAULT CHARACTER SET utf8mb4
    ->   COLLATE utf8mb4_unicode_ci;
Query OK, 1 row affected (0.11 sec)

mysql> USE car_pickup_db;
Database changed
mysql> CREATE TABLE pickup_requests (
    ->   id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
    ->   maker VARCHAR(64) NOT NULL,
    ->   model VARCHAR(64) NOT NULL,
    ->   drivable ENUM('drivable','not_drivable') NOT NULL,
    ->   owner ENUM('self','not_self') NOT NULL,
    ->   address VARCHAR(255) NOT NULL,
    ->   phone VARCHAR(32) NOT NULL,
    ->   email VARCHAR(255) NOT NULL,
    ->   created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    ->   PRIMARY KEY (id),
    ->   KEY idx_created_at (created_at)
    -> ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
Query OK, 0 rows affected (0.18 sec)

mysql> CREATE USER 'pickup_user'@'%' IDENTIFIED BY 'strong_password';
Query OK, 0 rows affected (0.07 sec)

mysql> GRANT SELECT, INSERT ON car_pickup_db.* TO 'pickup_user'@'%';
Query OK, 0 rows affected (0.01 sec)

mysql> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.01 sec)

mysql> npm i mysql2
    -> SHOW DATABASES;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'npm i mysql2
SHOW DATABASES' at line 1
mysql> SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| car_pickup_db      |
| information_schema |
| mysql              |
| performance_schema |
| rentacar           |
| sakila             |
| sys                |
| world              |
+--------------------+
8 rows in set (0.06 sec)

mysql> USE car_pickup_db;
Database changed
mysql> SHOW TABLES;
+-------------------------+
| Tables_in_car_pickup_db |
+-------------------------+
| pickup_requests         |
+-------------------------+
1 row in set (0.04 sec)

mysql> CREATE DATABASE IF NOT EXISTS car_pickup_db
    ->   DEFAULT CHARACTER SET utf8mb4
    ->   COLLATE utf8mb4_unicode_ci;
Query OK, 1 row affected, 1 warning (0.10 sec)

mysql> USE car_pickup_db;
Database changed
mysql> CREATE TABLE IF NOT EXISTS pickup_requests (
    ->   id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
    ->   maker VARCHAR(64) NOT NULL,
    ->   model VARCHAR(64) NOT NULL,
    ->   drivable ENUM('drivable','not_drivable') NOT NULL,
    ->   owner ENUM('self','not_self') NOT NULL,
    ->   address VARCHAR(255) NOT NULL,
    ->   phone VARCHAR(32) NOT NULL,
    ->   email VARCHAR(255) NOT NULL,
    ->   created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    ->   PRIMARY KEY (id),
    ->   KEY idx_created_at (created_at)
    -> ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
Query OK, 0 rows affected, 1 warning (0.11 sec)

mysql> export const dynamic = "force-dynamic";
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'export const dynamic = "force-dynamic"' at line 1
mysql>
mysql> type Row = {
    ->   id: number;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type Row = {
  id: number' at line 1
mysql>   maker: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'maker: string' at line 1
mysql>   model: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'model: string' at line 1
mysql>   drivable: "drivable" | "not_drivable";
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'drivable: "drivable" | "not_drivable"' at line 1
mysql>   owner: "self" | "not_self";
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'owner: "self" | "not_self"' at line 1
mysql>   address: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'address: string' at line 1
mysql>   phone: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'phone: string' at line 1
mysql>   email: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'email: string' at line 1
mysql>   created_at: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'created_at: string' at line 1
mysql> };
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '}' at line 1
mysql>
mysql> function formatJST(iso: string) {
    ->   const d = new Date(iso);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'function formatJST(iso: string) {
  const d = new Date(iso)' at line 1
mysql>   return d.toLocaleString("ja-JP", { timeZone: "Asia/Tokyo" });
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'return d.toLocaleString("ja-JP", { timeZone: "Asia/Tokyo" })' at line 1
mysql> }
    ->
    -> export default async function AdminPickupPage() {
    ->   const res = await fetch("http://localhost:3001/api/admin/pickup", { cache: "no-store" });
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '}

export default async function AdminPickupPage() {
  const res = await fetch("' at line 1
mysql>   const json = await res.json();
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'const json = await res.json()' at line 1
mysql>   const rows: Row[] = json?.rows ?? [];
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'const rows: Row[] = json?.rows ?? []' at line 1
mysql>
mysql>   return (
    ->     <main style={{ padding: 20, fontFamily: "system-ui" }}>
    ->       <h1 style={{ marginBottom: 12 }}>引取問い合わせ一覧</h1>
    ->       <p style={{ color: "#666", marginTop: 0 }}>最新200件</p>
    ->
    ->       <div style={{ overflowX: "auto" }}>
    ->         <table style={{ borderCollapse: "collapse", minWidth: 900, width: "100%" }}>
    ->           <thead>
    ->             <tr>
    ->               {["ID", "日時", "メーカー/車種", "自走", "名義", "住所", "電話", "メール"].map((h) => (
    ->                 <th key={h} style={{ textAlign: "left", borderBottom: "1px solid #ddd", padding: "8px 6px" }}>
    ->                   {h}
    ->                 </th>
    ->               ))}
    ->             </tr>
    ->           </thead>
    ->           <tbody>
    ->             {rows.map((r) => (
    ->               <tr key={r.id}>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>{r.id}</td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>{formatJST(r.created_at)}</td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>
    ->                   {r.maker} / {r.model}
    ->                 </td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>
    ->                   {r.drivable === "drivable" ? "自走可" : "不動"}
    ->                 </td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>
    ->                   {r.owner === "self" ? "本人" : "本人以外"}
    ->                 </td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>{r.address}</td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>{r.phone}</td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>{r.email}</td>
    ->               </tr>
    ->             ))}
    ->             {rows.length === 0 && (
    ->               <tr>
    ->                 <td colSpan={8} style={{ padding: "14px 6px", color: "#666" }}>
    ->                   データがありません（まず /pickup から送信してみてください）
    ->                 </td>
    ->               </tr>
    ->             )}
    ->           </tbody>
    ->         </table>
    ->       </div>
    ->     </main>
    ->   );
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'return (
    <main style={{ padding: 20, fontFamily: "system-ui" }}>
      <h1 s' at line 1
mysql> }
    -> export const dynamic = "force-dynamic";
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '}
export const dynamic = "force-dynamic"' at line 1
mysql>
mysql> type Row = {
    ->   id: number;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'type Row = {
  id: number' at line 1
mysql>   maker: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'maker: string' at line 1
mysql>   model: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'model: string' at line 1
mysql>   drivable: "drivable" | "not_drivable";
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'drivable: "drivable" | "not_drivable"' at line 1
mysql>   owner: "self" | "not_self";
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'owner: "self" | "not_self"' at line 1
mysql>   address: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'address: string' at line 1
mysql>   phone: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'phone: string' at line 1
mysql>   email: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'email: string' at line 1
mysql>   created_at: string;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'created_at: string' at line 1
mysql> };
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '}' at line 1
mysql>
mysql> function formatJST(iso: string) {
    ->   const d = new Date(iso);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'function formatJST(iso: string) {
  const d = new Date(iso)' at line 1
mysql>   return d.toLocaleString("ja-JP", { timeZone: "Asia/Tokyo" });
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'return d.toLocaleString("ja-JP", { timeZone: "Asia/Tokyo" })' at line 1
mysql> }
    ->
    -> export default async function AdminPickupPage() {
    ->   const res = await fetch("http://localhost:3001/api/admin/pickup", { cache: "no-store" });
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '}

export default async function AdminPickupPage() {
  const res = await fetch("' at line 1
mysql>   const json = await res.json();
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'const json = await res.json()' at line 1
mysql>   const rows: Row[] = json?.rows ?? [];
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'const rows: Row[] = json?.rows ?? []' at line 1
mysql>
mysql>   return (
    ->     <main style={{ padding: 20, fontFamily: "system-ui" }}>
    ->       <h1 style={{ marginBottom: 12 }}>引取問い合わせ一覧</h1>
    ->       <p style={{ color: "#666", marginTop: 0 }}>最新200件</p>
    ->
    ->       <div style={{ overflowX: "auto" }}>
    ->         <table style={{ borderCollapse: "collapse", minWidth: 900, width: "100%" }}>
    ->           <thead>
    ->             <tr>
    ->               {["ID", "日時", "メーカー/車種", "自走", "名義", "住所", "電話", "メール"].map((h) => (
    ->                 <th key={h} style={{ textAlign: "left", borderBottom: "1px solid #ddd", padding: "8px 6px" }}>
    ->                   {h}
    ->                 </th>
    ->               ))}
    ->             </tr>
    ->           </thead>
    ->           <tbody>
    ->             {rows.map((r) => (
    ->               <tr key={r.id}>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>{r.id}</td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>{formatJST(r.created_at)}</td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>
    ->                   {r.maker} / {r.model}
    ->                 </td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>
    ->                   {r.drivable === "drivable" ? "自走可" : "不動"}
    ->                 </td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>
    ->                   {r.owner === "self" ? "本人" : "本人以外"}
    ->                 </td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>{r.address}</td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>{r.phone}</td>
    ->                 <td style={{ borderBottom: "1px solid #eee", padding: "8px 6px" }}>{r.email}</td>
    ->               </tr>
    ->             ))}
    ->             {rows.length === 0 && (
    ->               <tr>
    ->                 <td colSpan={8} style={{ padding: "14px 6px", color: "#666" }}>
    ->                   データがありません（まず /pickup から送信してみてください）
    ->                 </td>
    ->               </tr>
    ->             )}
    ->           </tbody>
    ->         </table>
    ->       </div>
    ->     </main>
    ->   );
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'return (
    <main style={{ padding: 20, fontFamily: "system-ui" }}>
      <h1 s' at line 1
mysql> }
    -> USE car_pickup_db;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '}
USE car_pickup_db' at line 1
mysql> ^C
mysql> USE car_pickup_db;
Database changed
mysql> ALTER TABLE pickup_requests
    ->   ADD COLUMN status ENUM('new','working','done','ng') NOT NULL DEFAULT 'new',
    ->   ADD COLUMN memo TEXT NULL,
    ->   ADD COLUMN updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;
Query OK, 0 rows affected (0.14 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESCRIBE pickup_requests;
+------------+-----------------------------------+------+-----+-------------------+-----------------------------------------------+
| Field      | Type                              | Null | Key | Default           | Extra          |
+------------+-----------------------------------+------+-----+-------------------+-----------------------------------------------+
| id         | bigint unsigned                   | NO   | PRI | NULL              | auto_increment          |
| maker      | varchar(64)                       | NO   |     | NULL              |          |
| model      | varchar(64)                       | NO   |     | NULL              |          |
| drivable   | enum('drivable','not_drivable')   | NO   |     | NULL              |          |
| owner      | enum('self','not_self')           | NO   |     | NULL              |          |
| address    | varchar(255)                      | NO   |     | NULL              |          |
| phone      | varchar(32)                       | NO   |     | NULL              |          |
| email      | varchar(255)                      | NO   |     | NULL              |          |
| created_at | timestamp                         | NO   | MUL | CURRENT_TIMESTAMP | DEFAULT_GENERATED          |
| status     | enum('new','working','done','ng') | NO   |     | new               |          |
| memo       | text                              | YES  |     | NULL              |          |
| updated_at | timestamp                         | NO   |     | CURRENT_TIMESTAMP | DEFAULT_GENERATED on update CURRENT_TIMESTAMP |
+------------+-----------------------------------+------+-----+-------------------+-----------------------------------------------+
12 rows in set (0.05 sec)

mysql> USE car_pickup_db;
No connection. Trying to reconnect...
Connection id:    15
Current database: *** NONE ***

Database changed
mysql> SELECT id, maker, model, created_at FROM pickup_requests ORDER BY id DESC LIMIT 3;
+----+--------+----------+---------------------+
| id | maker  | model    | created_at          |
+----+--------+----------+---------------------+
|  3 | スズキ | ハスラー | 2026-01-07 14:48:39 |
|  2 | スズキ | ワゴンR  | 2026-01-06 15:44:48 |
|  1 | スズキ | ワゴンR  | 2026-01-06 15:39:33 |
+----+--------+----------+---------------------+
3 rows in set (0.02 sec)

mysql> SHOW DATABASES LIKE 'car%';
+-----------------+
| Database (car%) |
+-----------------+
| car_pickup_db   |
+-----------------+
1 row in set (0.20 sec)

mysql> SELECT DATABASE();
+---------------+
| DATABASE()    |
+---------------+
| car_pickup_db |
+---------------+
1 row in set (0.00 sec)

mysql> SHOW TABLES;
+-------------------------+
| Tables_in_car_pickup_db |
+-------------------------+
| pickup_requests         |
+-------------------------+
1 row in set (0.02 sec)

mysql> SELECT COUNT(*) AS cnt FROM pickup_requests;
+-----+
| cnt |
+-----+
|   3 |
+-----+
1 row in set (0.00 sec)

mysql> SELECT MAX(id) AS max_id, MIN(created_at) AS min_dt, MAX(created_at) AS max_dt FROM pickup_requests;
+--------+---------------------+---------------------+
| max_id | min_dt              | max_dt              |
+--------+---------------------+---------------------+
|      3 | 2026-01-06 15:39:33 | 2026-01-07 14:48:39 |
+--------+---------------------+---------------------+
1 row in set (0.00 sec)

mysql>
